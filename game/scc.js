var aa=["375804925205514925205264905205114745205114585205114425205044424985184424985044584985044904985184584985184744985184904985044744985114975484564975604714975605114975364514975605114334925114335145094905244664974984564974985314974985574974985314975425574975425834975425834974984924975424924974984924905205174945155054945154674905324494905321113871a1211","wab1111400v160000va00029va90q10v380098va80516g280000v070s10v480d00p220m16p280603b2500003130g00j250018l180s17v580s18v680n00p230g05m250p00p250z4170l170 pab1111000oa00029oa90000o070018o180a00o110i00o120 pag1111009of90400of00950o5700f8of80868o6805005180a50o610620627073073708408470i50o620508538063864807487580z8580 fbg111110adfa00000f90e00ef900091f90d09df90 1yg11110000fx0 fm11111000e0l0 91g11110008f00 qy11111000p0x0 qag1111000pf00009pf90030l3800f89f80o00o080n10n180m20m280 11811110000700 oyf1111000n0x0n09nex0000ne0000xmex0n00n180b30b410j40k410f70g710fc0fd10zg810 byf11110008er00009ek000xaex0000a0w0000ae40000a3h00d0aeh000093r000gach000r9er00a09em00a0ac600aeacf00e09eq000p95q0".split(" ")];var h,l,n=[],t=[],ba=[],u={x:0,y:0,z:0,c:0,b:0,f:0},ca=Function(),da=480,ea=360,fa=[0,0,0],ha=[0,0,0];
function w(a){a=a.split("").map(O=>parseInt(O,36));var b=[],c=[],e=[],f=[],d=[];c=[];var g,m=0,k=a[0]/2/10,p=a[1]/2/10,v=a[2]/2/10;for(g=4;g<3*a[3]+4;g+=3)c.push([a[g],a[g+1],a[g+2]]);var q=a.indexOf(35);-1==q&&(q=5E5);for(g=3*a[3]+4;g<a.length;g+=g<q?7:4){g==q&&g++;var r=a[g];var x=a[g+2];var E=a[g+1];if(g>=q){var F=r;var G=x;var L=E;var I=c[a[g+3]]}else F=a[g+3],G=a[g+5],L=a[g+4],I=c[a[g+6]];d.push([r,x,E,F,G,L]);x=ia(r/-10+k,x/10-p,E/10-v,-.1+F/-10+k,.1+G/10-p,.1+L/10-v);for(r=0;72>r;r++)b[r+72*
m]=x[r];e=e.concat(ja);for(r=0;24>r;r++)f=f.concat([.125*I[0],.125*I[1],.125*I[2],1]);m++}c=ka(b.length/6);return{l:b,j:c,n:e,f,s:[a[0],a[1],a[2]],b:d}}function ka(a){for(var b=Array(6*a),c=0;c<4*a;c+=4)for(var e of[...Array(6).keys()])b[c/4*6+e]=c+[0,1,2,0,2,3][e];return b}var ja=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0];
function ia(a,b,c,e,f,d){return[a,b,d,e,b,d,e,f,d,a,f,d,a,b,c,e,b,c,e,f,c,a,f,c,e,b,c,e,f,c,e,f,d,e,b,d,a,f,c,a,b,c,a,b,d,a,f,d,e,f,c,a,f,c,a,f,d,e,f,d,a,b,c,e,b,c,e,b,d,a,b,d]}var y={H:{},G:{},F:{},J:{},T:{},N:{},I:{},A:{},P:{},R:{},S:{}};
function la(){var a=document.getElementById("c");a.requestPointerLock=a.requestPointerLock;document.exitPointerLock=document.exitPointerLock;a.onclick=function(){};document.addEventListener("mousemove",ma,!1);document.addEventListener("pointerlockchange",na,!1);document.onkeydown=oa;document.onkeyup=pa}function na(){document.pointerLockElement===document.getElementById("c")?document.addEventListener("mousemove",qa,!1):document.removeEventListener("mousemove",qa,!1)}
function ma(a){var b=document.getElementById("c").getBoundingClientRect();da=a.clientX-b.left;ea=a.clientY-b.top}function qa(a){u.b-=a.movementX/140;u.c-=a.movementY/140}var z={};function oa(a){z[a.keyCode]=!0}function pa(a){z[a.keyCode]=!1}
function ra(){h.clearColor(.5,.5,.5,1);h.clearDepth(1);h.enable(2929);h.depthFunc(515);h.clear(16640);ca();n.forEach(function(a){var b=Math.tan(.5*Math.PI-.3927),c=1/-99.9;b=new Float32Array([b/(h.canvas.clientWidth/h.canvas.clientHeight),0,0,0,0,b,0,0,0,0,100.1*c,-1,0,0,20*c,0]);c=[u.x,u.y,u.z];var e=u.c,f=u.b,d=Math.cos(e);e=Math.sin(e);var g=Math.cos(f),m=Math.sin(f);f=[g,0,-m];var k=[m*e,d,g*e];d=[m*d,-e,d*g];c=new Float32Array([f[0],k[0],d[0],0,f[1],k[1],d[1],0,f[2],k[2],d[2],0,-A(f,c),-A(k,
c),-A(d,c),1]);d=a.a;Array.isArray(a.a)||(d=B(a.a));d=new Float32Array(d);C(y.H,a.M,3);C(y.G,a.K,3);C(y.F,a.v,4);h.bindBuffer(34963,a.D);h.useProgram(l);h.uniformMatrix4fv(y.N,!1,b);h.uniformMatrix4fv(y.T,!1,c);h.uniformMatrix4fv(y.J,!1,d);h.uniform3f(y.A,u.x,u.y,u.z);h.uniform3f(y.I,50,50,50);h.uniform3f(y.P,...fa);h.uniform3f(y.R,...ha);h.uniform1i(y.S,void 0===a.O);h.drawElements(4,a.C,5125,0)});requestAnimationFrame(ra)}
function C(a,b,c){h.bindBuffer(34962,b);h.vertexAttribPointer(a,c,5126,!1,0,0);h.enableVertexAttribArray(a)}
function D(a,b){var c;"object"==typeof b?c=b:c=t[b];var e=h.createBuffer();h.bindBuffer(34962,e);h.bufferData(34962,new Float32Array(c.l),35044);var f=h.createBuffer();h.bindBuffer(34963,f);h.bufferData(34963,new Uint32Array(c.j),35044);var d=h.createBuffer();h.bindBuffer(34962,d);h.bufferData(34962,new Float32Array(c.n),35044);var g=h.createBuffer();h.bindBuffer(34962,g);h.bufferData(34962,new Float32Array(c.f),35044);n.push(a={a,M:e,D:f,K:d,v:g,U:c.l.length,C:c.j.length,i:b});return a}
var H=Math.PI,J=H/2,K=Math.sqrt(2)/2;function sa(a,b){a=h.createShader(a);h.shaderSource(a,b);h.compileShader(a);console.log(h.getShaderParameter(a,35713)?"shader compiled successfully":"failed to compile");b=h.getShaderInfoLog(a);""!=b&&console.log("compile log: "+b);return a}function A(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}
function M(a,b){var c=a[0],e=a[1],f=a[2],d=a[4],g=a[5],m=a[6],k=a[8],p=a[9],v=a[10],q=b[0],r=b[1],x=b[2],E=b[4],F=b[5],G=b[6],L=b[8],I=b[9],O=b[10],V=b[12],W=b[13];b=b[14];return[c*q+d*r+k*x,e*q+p*x+r*g,f*q+m*r+v*x,0,c*E+d*F+k*G,e*E+p*G+F*g,f*E+m*F+v*G,0,c*L+d*I+k*O,e*L+p*O+I*g,f*L+m*I+v*O,0,a[12]+c*V+d*W+k*b,a[13]+e*V+p*b+W*g,a[14]+f*V+m*W+v*b,1]}
function B(a){var b=Math.cos(a.c),c=Math.sin(a.c),e=Math.cos(a.b),f=Math.sin(a.b),d=Math.cos(a.f),g=Math.sin(a.f),m=a.d,k=a.e,p=a.B;return[e*m*d,e*g*m,-f*m,0,-b*g*k+c*f*k*d,b*k*d+c*f*g*k,c*e*k,0,b*f*p*d+c*g*p,b*f*g*p-c*p*d,b*e*p,0,a.x,a.y,a.z,1]}function N(a,b,c,e=0,f=0,d=0,g=1,m=1,k=1){return{x:a,y:b,z:c,c:e,b:f,f:d,d:g,e:m,B:k}};(function(){h=document.getElementById("c").getContext("webgl2");var a=sa(35633,"\nattribute vec3 in_position;\nattribute vec3 in_normal;\nattribute vec4 in_color;\n\nuniform mat4 model_matrix, view_matrix, projection_matrix;\n\nvarying highp vec3 world_pos;\nvarying highp vec3 world_normal;\nvarying highp vec4 world_color;\nvarying highp vec4 viewSpace;\nbool useShading;\n    \nvoid main() {\n    world_pos = (model_matrix * vec4(in_position,1)).xyz;\n    world_normal = normalize(mat3(model_matrix) * in_normal);\n    world_color = in_color;\n\n    viewSpace = view_matrix * model_matrix * vec4(in_position,1);\n    gl_Position = projection_matrix * viewSpace;\n}"),
b=sa(35632,"\nuniform highp vec3 spot_position;\nuniform highp vec3 spot_rotation;\n\nuniform highp vec3 light_position;\nuniform highp vec3 eye_position;\nuniform bool useShading;\n \n//can pass them as uniforms\nconst highp vec3 DiffuseLight = vec3(0.1, 0.1, 0.1);\n//const highp vec3 RimColor = vec3(0.);\n\n//from vertex shader\nvarying highp vec3 world_pos;\nvarying highp vec3 world_normal;\nvarying highp vec4 world_color;\nvarying highp vec4 viewSpace;\n \nconst lowp vec3 fogColor = vec3(0.5, 0.5, 0.5);\nconst lowp float FogDensity = 0.5;\n \nvoid main() {\n    //vec3 tex1 = texture(texture1, texcoord).rgb;\n     \n    //get light an view directions\n    highp vec3 L = normalize(light_position - world_pos);\n    highp vec3 V = normalize(eye_position - world_pos);\n     \n    //diffuse lighting\n    highp vec3 diffuse = DiffuseLight;\n    if (useShading) {\n        diffuse = diffuse * (max(0., dot(L,world_normal)) + max(0., dot(vec3(-L.x, L.y, -L.z),world_normal)));\n\n        highp vec3 LL = spot_position - world_pos;\n        highp float distToLight = length(LL);\n        LL = normalize(LL);\n        highp float cosDir = dot(LL, -spot_rotation);\n        highp float spotEffect = smoothstep(0.958, 1.0, cosDir);\n        highp float heightAttenuation = smoothstep(5.0, 0.0, distToLight);\n        diffuse += spotEffect * heightAttenuation;\n    }\n     \n    //rim lighting\n    //highp float rim = float(1) - max(dot(V, world_normal), 0.0);\n    //rim = smoothstep(0.6, 1.0, rim);\n    //highp vec3 finalRim = RimColor * vec3(rim, rim, rim);\n    //get all lights and texture\n    //highp vec3 lightColor = (finalRim + diffuse) * world_color * 3.;\n    highp vec4 lightColor = vec4(diffuse,1) * world_color * vec4(3.,3.,3.,1.);\n     \n    //highp vec3 finalColor = vec3(0, 0, 0);\n     \n    //distance\n    //highp float dist = 0.;\n    //highp float fogFactor = 0.;\n\n    //range based\n    highp float dist = length(viewSpace);\n     \n    highp float fogFactor = 1.0/exp(dist * FogDensity);\n    fogFactor = clamp( fogFactor, 0.0, 1.0 );\n\n    //mix function fogColor*(1\u2212fogFactor) + lightColor*fogFactor\n    highp vec4 finalColor = mix(vec4(fogColor,world_color.a), lightColor, vec4(fogFactor));\n     \n    //show fogFactor depth(gray levels)\n    //fogFactor = 1 - fogFactor;\n    //out_color = vec4( fogFactor, fogFactor, fogFactor,1.0 );\n    gl_FragColor = finalColor;\n}");
l=h.createProgram();h.attachShader(l,a);h.attachShader(l,b);h.linkProgram(l);Object.keys(y).forEach(function(c){y[c]=c.startsWith("in_")?h.getAttribLocation(l,c):h.getUniformLocation(l,c)});h.blendFunc(770,771);h.enable(3042);la();requestAnimationFrame(ra);u.b=Math.PI})();var P={},ta={},ua={},Q=0,R=H,S={},T={},U={},X={},va=[],Y,Z;t.push(w("7e725200401155571004664100666612284481119559122b44b133a33d13303340"));t.push(w("gqf486585006311174e8aj255c69j165m99p076c98k27498ab264c6aj172g8ch271c82e07cc8de074e94k27ae9ak295e95k399e99k375d99d271f82g27cf8dg276l88l094c9ac274c75c379c89c374d7ad284d94d38ad9ad375k85k379k89k3z84c285c37ac38ac2"));
t.push(w("2i2286506300411810001130"));t.push(w("2u2185000f11t0"));t.push(w("8y8486085070044433h44q133r44t322w52x325w55x323q54q113r14s143r44v363r64s122w24x352w54x333w44w034r34v323t24t153t54t1z33u233v3"));t.push({l:[0,0,0,K,-2,K,-K,-2,K,-K,-2,-K,K,-2,-K],j:[0,1,2,0,2,3,0,3,4,0,4,1,1,2,3,1,3,4],n:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],f:[1,.5,.5,.3,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0]});t.push(w("p6a2800111f20m741731n631e11n831e02n921722o7213425541g40l5513326621e12o821332363153256314344641z122103212321062126211721433046303340534036405640"));
t.push(w("15c1111000002004305300240340z0130"));t.push(w("22216000001110"));t.push(w("22210600001110"));t.push(w("a3a388588253000199220001100200310140051006007101800910002013012203300420530162073008209301040150024035014405500640750184095000601701260370046057016607700860970108019002803901480590068079018809900"));t[600]=w("b1325554440000200100120120022003003201400420050052016006200700720180082009009201a00a200");
(function(){var a=aa[0],b=aa[1],c=parseInt(a.slice(0,2)),e=a.substr(2,9*c).match(/[\d][\d][\d]/g).map(m=>parseInt(m)),f=Math.max(500,t.length),d=f,g=[];a.slice(2+9*c).match(/[0-9a-z]/g).map(m=>{g=g.concat(Array(parseInt(m,36)).fill(d));t[d]=w(b[d-f]);d++});a=[];for(c=0;c<e.length;c+=3)a.push({x:e[c],y:e[c+1],z:e[c+2],o:g[c/3]});ba.push(a)})();(function(){n=[];var a=(b,c,e)=>t[e.o].s[c]&1?b+.5:b;ba[0].forEach(b=>{D(N(a(b.x-500,0,b)/-10,a(b.z-500,1,b)/10,a(b.y-500,2,b)/10),b.o)})})();
P=D(N(-7,2,-.5,0,H,0,.1,.1,.1),1);ta=D(N(2.75,.22,5.87,0,H,0,.1,.1,.1),2);ua=D(N(2.75,.22,5.83,0,H,0,.1,.1,.1),2);S=D(N(2.72,.301,5.85,0,H,0,.05,.05,.05),3);T=D(N(2.72,.301,5.85,0,H,0,.05,.05,.05),3);U=D(N(2.72,.301,5.85,0,H,0,.05,.05,.05),4);P.a.g=0;P.a.h=0;va.push({L:D(N(-1.1,2.39,-.5,0,0,0,.3,.3,.3),10),u:D(N(-1.15,1.55,-.5,0,0,0,1,.8,1),600),w:function(a,b){a.u.a.x=Math.max(-2.3,Math.min(-1.15,a.u.a.x+.005*(b?1:-1)))}});Y=D(N(2.72,.301,5.85,0,H,0,.3,.3,.3),5);Y.O="";
ca=function(){z[37]?(P.a.g=-.01,R=0,Q+=.1):z[39]?(P.a.g=.01,R=H,Q+=.1):(Q>2*H&&(Q%=2*H),Q+=.1*(Math.round(Q/H)*H-Q));P.a.b+=.1*(R-P.a.b);z[38]&&!P.a.m&&(P.a.h=.017,P.a.m=!0);P.a.x+=P.a.g;P.a.y+=P.a.h;P.a.g/=1.2;P.a.h-=.001;for(var a=P.a,b=n,c=!1,e=0;e<b.length;e++){var f=b[e];if(!("object"!=typeof f.i&&499>f.i))for(var d=t[f.i].s,g=t[f.i].b,m=0;m<g.length;m++){var k=g[m],p=(d[0]-k[3])/10+(f.a.x-d[0]/2/10),v=k[1]/10+(f.a.y-d[1]/2/10),q=k[2]/10+(f.a.z-d[2]/2/10),r=(d[0]-k[0])/10+(f.a.x-d[0]/2/10),x=
k[4]/10+(f.a.y-d[1]/2/10);k=k[5]/10+(f.a.z-d[2]/2/10);var E=(r-p)/2+p,F=(x-v)/2+v,G=(k-q)/2+q;p<a.x+.07&&a.x-.07<r&&v<a.y+.25&&a.y-.25<x&&q<a.z+.07&&a.z-.07<k&&(p=E>a.x?p-(a.x+.07):r-(a.x-.07),v=F>a.y?v-(a.y+.25):x-(a.y-.25),q=G>a.z?q-(a.z+.07):k-(a.z-.07),Math.abs(p)<Math.abs(v)?Math.abs(p)<Math.abs(q)?a.x+=p:a.z+=q:Math.abs(v)<Math.abs(q)?(a.y+=v,c=!0):a.z+=q)}}c&&(P.a.m=!1,P.a.h=0);ta.a=M(B(P.a),B(N(0,-.31,.2,0,0,.4*Math.sin(Q))));ua.a=M(B(P.a),B(N(0,-.31,-.2,0,0,.4*-Math.sin(Q))));S.a=M(B(P.a),
B(N(.2,.5,0,J/3,J,0,.5,.5,.5)));T.a=M(S.a,B(N(0,1.45,0,-J/2,0,0,1,1,1)));a=u;X.x=a.x;X.y=a.y;X.z=a.z;a=(da-480)/480;b=(ea-360)/360;--X.z;X.x+=a/1.7*(.14*b+1)-.05;X.y-=b/2.2+.38;a=b=Math.atan2(X.y-U.a[13],X.x-U.a[12]);P.a.b<J&&(b+=H,b*=-1);U.a=M(T.a,B(N(0,1.45,0,b-1.3,0,0,1,1,1)));Y.a=M(U.a,B(N(0,1.5,0,H,H,0,10,10,10)));fa=[Y.a[12],Y.a[13],Y.a[14]];e=Math.cos;f=Math.sin;b=e(0)*e(a);c=f(a);a=f(0)*e(a);ha=[b,c,a];Z={x:P.a.x+.3,y:P.a.y+.6,z:P.a.z+1.2};u.x+=.1*(Z.x-u.x);u.y+=.1*(Z.y-u.y);u.z+=.1*(Z.z-
u.z);for(a=0;a<va.length;a++)b=va[a],c=b.L,e=Math.sqrt((c.a.y-U.a[13])**2+(c.a.x-U.a[12])**2),b.w(b,.4>Math.abs(Math.atan2(X.y-U.a[13],X.x-U.a[12])-Math.atan2(c.a.y-U.a[13],c.a.x-U.a[12]))&&1.2>e)};u={x:3,y:1,z:7,c:-.3,b:0,f:0};
