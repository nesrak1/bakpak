'use strict';var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
ca("Array.prototype.flat",function(a){return a?a:function(b){b=void 0===b?1:b;for(var c=[],d=0;d<this.length;d++){var g=this[d];Array.isArray(g)&&0<b?(g=Array.prototype.flat.call(g,b-1),c.push.apply(c,g)):c.push(g)}return c}});var e,h,da=[],k=[],q={x:0,y:0,z:0,c:0,b:0,f:0},ea,fa,ha;
function t(a){a=a.split("").map(Ja=>parseInt(Ja,36));var b=[],c=[],d=[],g=[];c=[];var f,m=0,l=a[0]/2/10,n=a[1]/2/10,w=a[2]/2/10;for(f=4;f<3*a[3]+4;f+=3)c.push([a[f],a[f+1],a[f+2]]);var r=a.indexOf(35);-1==r&&(r=5E5);for(f=3*a[3]+4;f<a.length;f+=f<r?7:4){f==r&&f++;var p=a[f];var B=a[f+2];var pa=a[f+1];if(f>=r){var qa=p;var ra=B;var sa=pa;var W=c[a[f+3]]}else qa=a[f+3],ra=a[f+5],sa=a[f+4],W=c[a[f+6]];B=ia(p/-10+l,B/10-n,pa/10-w,-.1+qa/-10+l,.1+ra/10-n,.1+sa/10-w);for(p=0;72>p;p++)b[p+72*m]=B[p];d=d.concat(ja);
for(p=0;24>p;p++)g=g.concat([.125*W[0],.125*W[1],.125*W[2],1]);m++}c=ka(b.length/6);return{h:b,g:c,n:d,f:g}}function ka(a){for(var b=Array(6*a),c=0;c<4*a;c+=4)for(var d of[...Array(6).keys()])b[c/4*6+d]=c+[0,1,2,0,2,3][d];return b}var ja=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0];
function ia(a,b,c,d,g,f){return[a,b,f,d,b,f,d,g,f,a,g,f,a,b,c,d,b,c,d,g,c,a,g,c,d,b,c,d,g,c,d,g,f,d,b,f,a,g,c,a,b,c,a,b,f,a,g,f,d,g,c,a,g,c,a,g,f,d,g,f,a,b,c,d,b,c,d,b,f,a,b,f]}var u={v:{},u:{},s:{},B:{},G:{},F:{},A:{},l:{}};
function la(){var a=document.getElementById("c");a.requestPointerLock=a.requestPointerLock;document.exitPointerLock=document.exitPointerLock;document.addEventListener("mousemove",ma,!1);document.addEventListener("pointerlockchange",na,!1);document.onkeydown=oa;document.onkeyup=ta}function na(){document.pointerLockElement===document.getElementById("c")?document.addEventListener("mousemove",ua,!1):document.removeEventListener("mousemove",ua,!1)}
function ma(a){var b=document.getElementById("c").getBoundingClientRect();fa=a.clientX-b.left;ha=a.clientY-b.top}function ua(a){q.b-=a.movementX/140;q.c-=a.movementY/140}var v={};function oa(a){v[a.keyCode]=!0}function ta(a){v[a.keyCode]=!1}function x(a){q.x+=.05*Math.cos((180*-q.b/Math.PI+a)%360*Math.PI/180);q.z+=.05*Math.sin((180*-q.b/Math.PI+a)%360*Math.PI/180)}
function va(){e.clearColor(.5,.5,.5,1);e.clearDepth(1);e.enable(e.DEPTH_TEST);e.depthFunc(e.LEQUAL);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);ea();da.forEach(function(a){var b=Math.tan(.5*Math.PI-.3927),c=1/-99.9;b=new Float32Array([b/(e.canvas.clientWidth/e.canvas.clientHeight),0,0,0,0,b,0,0,0,0,100.1*c,-1,0,0,20*c,0]);c=[q.x,q.y,q.z];var d=q.c,g=q.b,f=Math.cos(d);d=Math.sin(d);var m=Math.cos(g),l=Math.sin(g);g=[m,0,-l];var n=[l*d,f,m*d];f=[l*f,-d,f*m];c=new Float32Array([g[0],n[0],f[0],0,g[1],
n[1],f[1],0,g[2],n[2],f[2],0,-y(g,c),-y(n,c),-y(f,c),1]);f=a.a;d=Math.cos(f.c);m=Math.sin(f.c);g=Math.cos(f.b);n=Math.sin(f.b);l=Math.cos(f.f);var w=Math.sin(f.f),r=f.d,p=f.e,B=f.i;f=new Float32Array([g*r*l,g*w*r,-n*r,0,-d*w*p+m*n*p*l,d*p*l+m*n*w*p,m*g*p,0,d*n*B*l+m*w*B,d*n*w*B-m*B*l,d*g*B,0,f.x,f.y,f.z,1]);wa(u.v,a.D,3);wa(u.u,a.C,3);wa(u.s,a.j,4);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a.o);e.useProgram(h);e.uniformMatrix4fv(u.F,!1,b);e.uniformMatrix4fv(u.G,!1,c);e.uniformMatrix4fv(u.B,!1,f);e.uniform3f(u.l,
q.x,q.y,q.z);e.uniform3f(u.A,50,50,50);e.drawElements(e.TRIANGLES,a.m,e.UNSIGNED_INT,0)});requestAnimationFrame(va)}function wa(a,b,c){e.bindBuffer(e.ARRAY_BUFFER,b);e.vertexAttribPointer(a,c,e.FLOAT,!1,0,0);e.enableVertexAttribArray(a)}
function z(a,b){var c;"object"==typeof b?c=b:c=k[b];b=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,b);e.bufferData(e.ARRAY_BUFFER,new Float32Array(c.h),e.STATIC_DRAW);var d=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,d);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint32Array(c.g),e.STATIC_DRAW);var g=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,g);e.bufferData(e.ARRAY_BUFFER,new Float32Array(c.n),e.STATIC_DRAW);var f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f);e.bufferData(e.ARRAY_BUFFER,
new Float32Array(c.f),e.STATIC_DRAW);da.push(a={a,D:b,o:d,C:g,j:f,H:c.h.length,m:c.g.length});return a}var A=Math.PI,C=A/2,D=Math.sqrt(2)/2;function xa(a,b){a=e.createShader(a);e.shaderSource(a,b);e.compileShader(a);console.log("Shader compiled successfully: "+e.getShaderParameter(a,e.COMPILE_STATUS));console.log("Shader compiler log: "+e.getShaderInfoLog(a));return a}function y(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}
function E(a,b,c,d=0,g=0,f=0,m=1,l=1,n=1){return{x:a,y:b,z:c,c:d,b:g,f,d:m,e:l,i:n}};(function(){e=document.getElementById("c").getContext("webgl2");var a=xa(e.VERTEX_SHADER,"\nattribute vec3 in_position;\nattribute vec3 in_normal;\nattribute vec4 in_color;\n\nuniform mat4 model_matrix, view_matrix, projection_matrix;\n\nvarying highp vec3 world_pos;\nvarying highp vec3 world_normal;\nvarying highp vec4 world_color;\nvarying highp vec4 viewSpace;\n    \nvoid main() {\n    world_pos = (model_matrix * vec4(in_position,1)).xyz;\n    world_normal = normalize(mat3(model_matrix) * in_normal);\n    world_color = in_color;\n\n    viewSpace = view_matrix * model_matrix * vec4(in_position,1);\n    gl_Position = projection_matrix * viewSpace;\n}"),
b=xa(e.FRAGMENT_SHADER,"\nuniform highp vec3 light_position;\nuniform highp vec3 eye_position;\n \n//can pass them as uniforms\nconst highp vec3 DiffuseLight = vec3(0.1, 0.1, 0.1);\n//const highp vec3 RimColor = vec3(0.);\n\n//from vertex shader\nvarying highp vec3 world_pos;\nvarying highp vec3 world_normal;\nvarying highp vec4 world_color;\nvarying highp vec4 viewSpace;\n \nconst lowp vec3 fogColor = vec3(0.5, 0.5, 0.5);\nconst lowp float FogDensity = 0.5;\n \nvoid main() {\n    //vec3 tex1 = texture(texture1, texcoord).rgb;\n     \n    //get light an view directions\n    highp vec3 L = normalize( light_position - world_pos);\n    highp vec3 V = normalize( eye_position - world_pos);\n     \n    //diffuse lighting\n    highp vec3 diffuse = DiffuseLight * (max(0., dot(L,world_normal)) + max(0., dot(vec3(-L.x, L.y, -L.z),world_normal)));\n     \n    //rim lighting\n    //highp float rim = float(1) - max(dot(V, world_normal), 0.0);\n    //rim = smoothstep(0.6, 1.0, rim);\n    //highp vec3 finalRim = RimColor * vec3(rim, rim, rim);\n    //get all lights and texture\n    //highp vec3 lightColor = (finalRim + diffuse) * world_color * 3.;\n    highp vec4 lightColor = vec4(diffuse,1) * world_color * vec4(3.,3.,3.,1.);\n     \n    //highp vec3 finalColor = vec3(0, 0, 0);\n     \n    //distance\n    //highp float dist = 0.;\n    //highp float fogFactor = 0.;\n\n    //range based\n    highp float dist = length(viewSpace);\n     \n    highp float fogFactor = 1.0/exp(dist * FogDensity);\n    fogFactor = clamp( fogFactor, 0.0, 1.0 );\n\n    //mix function fogColor*(1\u2212fogFactor) + lightColor*fogFactor\n    highp vec4 finalColor = mix(vec4(fogColor,1.), lightColor, vec4(fogFactor));\n     \n    //show fogFactor depth(gray levels)\n    //fogFactor = 1 - fogFactor;\n    //out_color = vec4( fogFactor, fogFactor, fogFactor,1.0 );\n    gl_FragColor = finalColor;\n}");
h=e.createProgram();e.attachShader(h,a);e.attachShader(h,b);e.linkProgram(h);Object.keys(u).forEach(function(c){u[c]=c.startsWith("in_")?e.getAttribLocation(h,c):e.getUniformLocation(h,c)});e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);e.enable(e.BLEND);la();requestAnimationFrame(va);q.b=Math.PI})();var F;function G(){var a=F;0==a&&(a=.1);return Math.sin(1/(a/1E7))/2}function H(a,b,c){a.x+=b*Math.cos(c);a.z+=b*Math.sin(c)}function ya(a,b){a.x+=b*Math.cos(C);a.y+=b*Math.sin(C)}
function I(a,b){a.x=b.x;a.y=b.y;a.z=b.z}function za(a,b){I(a,b);a.c=b.c;a.b=b.b;a.f=b.f;a.d=b.d;a.e=b.e;a.i=b.i}var J;function Aa(){function a(p){return((g[m[f[p]]]||0)+(g[m[f[p+4]]]||0))/2}for(var b=Ba*Ca,c=Da*Ca,d=Ca,g=K,f=[0,2,0,1,1,3,2,3],m=[b+c*J,b+d+c*J,b+(c+d)*J,b+d+(c+d)*J],l=[a(1),a(0),a(2),a(3)],n=b+d/2,w=c+d/2,r=0;4>r;r++)g[[n,n,b,b+d][r]+[c+d,c,w,w][r]*J]=l[r]+.1*(F=G())*Math.log2(d);g[n+w*J]=(l[0]+l[1]+l[2]+l[3])/4}
function Ea(){var a=Fa,b=Ga,c=!1;Ha.forEach(d=>{1>Math.abs(d[0]-a)&&1>Math.abs(d[1]-b)&&(c|=1)});return c}var Ia={},L={},M={},N={},O=0,P={},Q={},R={},S={},Ka=[],T,U;function La(){var a=L.a,b=a.x-.05,c=Math.ceil(10*b),d=Math.floor(10*a.z),g=c-10*b;a.y=.13+(Math.max(.001,Ia[d+Math.floor(10*b)*J])*g+Math.max(.001,Ia[d+c*J])*(1-g))}F=.39954239006;J=65;var K=Array(4096);K[0]=(F=G())+.5;K[64]=(F=G())+.5;K[64*J]=(F=G())+.5;K[J*J-1]=(F=G())+.5;
for(var V=0;6>V;V++)for(var Ma=2**V,Ca=64/Ma,Ba=0;Ba<Ma;Ba++)for(var Da=0;Da<Ma;Da++)Aa();for(V in[...Array(K.length).keys()])K[V]*=.7;for(var Na=Array(304200),Oa=Array(304200),Pa=Array(405600),X=0;4225>X;X++){var Qa=Math.floor(X/65)/10,Ra=X%65/10,Sa=ia(Qa,0,Ra,Qa+.1,Math.max(.01,K[X]),Ra+.1),Y;for(Y=0;72>Y;Y++)Na[Y+72*X]=Sa[Y];for(Y=0;72>Y;Y++)Oa[Y+72*X]=ja[Y];for(Y=0;96>Y;Y++)Pa[Y+96*X]=[.1,.8,.1,1][Y%4]}var Ta=ka(Na.length/6);z(E(0,0,0),{h:Na,g:Ta,n:Oa,f:Pa});var Ua=Ia=K;F=.45;var Ha=[];k.push(t("7e725200401155571004664100666612284481119559122b44b133a33d13303340"));
for(var Z=0;4225>Z;Z++)if(.49999<(F=G())){var Va=Ua[Z],Fa=Math.floor(Z/65)/10,Ga=Z%65/10;Ea()||(z(E(Fa+.05,Math.max(.001,Va)+.7,Ga+.05),0),Ha.push([Fa,Ga]))}k.push(t("gqf486585006311174e8aj255c69j165m99p076c98k27498ab264c6aj172g8ch271c82e07cc8de074e94k27ae9ak295e95k399e99k375d99d271f82g27cf8dg276l88l094c9ac274c75c379c89c374d7ad284d94d38ad9ad375k85k379k89k3z84c285c37ac38ac2"));k.push(t("2i2286506300411810001130"));k.push(t("2u2185000f11t0"));k.push(t("8y8486085070044433h44q133r44t322w52x325w55x323q54q113r14s143r44v363r64s122w24x352w54x333w44w034r34v323t24t153t54t1z33u233v3"));
k.push({h:[0,0,0,D,-2,D,-D,-2,D,-D,-2,-D,D,-2,-D],g:[0,1,2,0,2,3,0,3,4,0,4,1,1,2,3,1,3,4],n:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],f:Array(5).fill([2.5,2,.5,.2]).flat()});k.push(t("p6a2800111f20m741731n631e11n831e02n921722o7213425541g40l5513326621e12o821332363153256314344641z122103212321062126211721433046303340534036405640"));k.push(t("1561111000002004305300240340z0130"));L=z(E(2.75,.251,5.85,0,A,0,.1,.1,.1),1);M=z(E(2.75,.22,5.87,0,A,0,.1,.1,.1),2);N=z(E(2.75,.22,5.83,0,A,0,.1,.1,.1),2);
P=z(E(2.72,.301,5.85,0,A,0,.05,.05,.05),3);Q=z(E(2.72,.301,5.85,0,A,0,.05,.05,.05),3);R=z(E(2.72,.301,5.85,0,A,0,.05,.05,.05),4);Ka.push(function(){var a=E(4.24,.5,5.85,0,A,0,.05,.05,.05),b=[],c;for(c in[...Array(8).keys()]){var d=E(0,0,0);za(d,a);b[c]=z(d,7)}return{body:z(a,6),w:b}}());T=z(E(2.72,.301,5.85,0,A,0,.3,.3,.3),5);
ea=function(){v[65]?x(180):v[68]&&x(0);v[87]?x(-90):v[83]&&x(90);if(v[32])q.y+=.05;else if(v[16]||v[67])q.y-=.05;v[37]?(L.a.x-=.005,L.a.b+=.1*-L.a.b,O+=.1):v[39]?(L.a.x+=.005,L.a.b+=.1*(A-L.a.b),O+=.1):(O>2*A&&(O%=2*A),O+=.1*(Math.round(O/A)*A-O));I(M.a,L.a);I(N.a,L.a);H(M.a,.02,-L.a.b+C);H(N.a,.02,-L.a.b-C);M.a.y-=.031;N.a.y-=.031;M.a.f=.4*Math.sin(O);N.a.f=.4*-Math.sin(O);La();Ka.forEach(function(c){for(var d in[...Array(8).keys()]){var g=c.w[d],f=Math.floor(d/4),m=[C,-C][f];za(g.a,c.body.a);g.a.b=
[A,0][f];H(g.a,d%4*.01-.005,c.body.a.b);H(g.a,.025,c.body.a.b-m)}});I(P.a,L.a);P.a.y+=.05;H(P.a,.03,-L.a.b);P.a.c=C/3;P.a.b=L.a.b+C;I(Q.a,P.a);Q.a.c=C/3;Q.a.b=L.a.b-C;H(Q.a,.07*Math.sin(P.a.c),-L.a.b);ya(Q.a,.07*Math.cos(P.a.c));I(R.a,Q.a);R.a.b=L.a.b-C;H(R.a,.07*Math.sin(-Q.a.c),-L.a.b);ya(R.a,.07*Math.cos(-Q.a.c));I(T.a,R.a);T.a.c=R.a.c-A;T.a.b=L.a.b-C;H(T.a,.07*Math.sin(-R.a.c),-L.a.b);ya(T.a,.07*Math.cos(-R.a.c));U={x:L.a.x+.3,y:L.a.y+.6,z:L.a.z+1.2};q.x+=.1*(U.x-q.x);q.y+=.1*(U.y-q.y);q.z+=.1*
(U.z-q.z);I(S,q);var a=(fa-480)/480,b=(ha-360)/360;--S.z;S.x+=a/1.7*(.14*b+1)-.05;S.y-=b/2.2+.38;R.a.c=Math.atan2(S.y-R.a.y,R.a.x-S.x)-C;L.a.b<C&&(R.a.c*=-1)};q={x:3,y:1,z:7,c:-.3,b:0,f:0};
