var c,h,aa=[],k=[],r={x:0,y:0,z:0,f:0,b:0,c:0},ba;function u(a){a=a.split("").map((a)=>parseInt(a,36));var d=[],e=[],f=[],g=[];e=[];var b,n=0,l=a[0]/2/10,m=a[1]/2/10,t=a[2]/2/10;for(b=4;b<3*a[3]+4;b+=3)e.push([a[b],a[b+1],a[b+2]]);var q=a.indexOf(35);-1==q&&(q=5E5);for(b=3*a[3]+4;b<a.length;b+=b<q?7:4){b==q&&b++;var p=a[b];var w=a[b+2];var ca=a[b+1];if(b>=q){var da=p;var ea=w;var fa=ca;var L=e[a[b+3]]}else da=a[b+3],ea=a[b+5],fa=a[b+4],L=e[a[b+6]];w=ha(p/-10+l,w/10-m,ca/10-t,-.1+da/-10+l,.1+ea/10-m,.1+fa/10-t);for(p=0;72>p;p++)d[p+72*n]=w[p];f=f.concat([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0]);for(p=0;24>p;p++)g=g.concat([.125*L[0],.125*L[1],.125*L[2],1]);n++}e=ia(d.length/6);return{g:d,h:e,n:f,c:g}}function ia(a){for(var d=Array(6*a),e=0;e<4*a;e+=4)for(var f of[...Array(6).keys()])d[e/4*6+f]=e+[0,1,2,0,2,3][f];return d}var ja=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0];function ha(a,d,e,f,g,b){return[a,d,b,f,d,b,f,g,b,a,g,b,a,d,e,f,d,e,f,g,e,a,g,e,f,d,e,f,g,e,f,g,b,f,d,b,a,g,e,a,d,e,a,d,b,a,g,b,f,g,e,a,g,e,a,g,b,f,g,b,a,d,e,f,d,e,f,d,b,a,d,b]}var v={u:{},s:{},o:{},w:{},F:{},C:{},v:{},j:{}};function ka(){var a=document.getElementById("c");a.requestPointerLock=a.requestPointerLock;document.exitPointerLock=document.exitPointerLock;a.onclick=function(){a.requestPointerLock()};document.addEventListener("pointerlockchange",la,!1);document.onkeydown=ma;document.onkeyup=na}function la(){document.pointerLockElement===document.getElementById("c")?document.addEventListener("mousemove",oa,!1):document.removeEventListener("mousemove",oa,!1)}function oa(a){r.b-=a.movementX/100;r.f-=a.movementY/100}var x={};function ma(a){x[a.keyCode]=!0}function na(a){x[a.keyCode]=!1}function y(a){r.x+=.05*Math.cos((180*-r.b/Math.PI+a)%360*Math.PI/180);r.z+=.05*Math.sin((180*-r.b/Math.PI+a)%360*Math.PI/180)}function pa(){c.clearColor(.5,.5,.5,1);c.clearDepth(1);c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);ba();aa.forEach(function(a){var d=Math.tan(.5*Math.PI-.3927),e=1/-99.9;d=new Float32Array([d/(c.canvas.clientWidth/c.canvas.clientHeight),0,0,0,0,d,0,0,0,0,100.1*e,-1,0,0,20*e,0]);e=[r.x,r.y,r.z];var f=r.f,g=r.b,b=Math.cos(f);f=Math.sin(f);var n=Math.cos(g),l=Math.sin(g);g=[n,0,-l];var m=[l*f,b,n*f];b=[l*b,-f,b*n];e=new Float32Array([g[0],m[0],b[0],0,g[1],m[1],b[1],0,g[2],m[2],b[2],0,-z(g,e),-z(m,e),-z(b,e),1]);b=a.a;f=Math.cos(b.f);n=Math.sin(b.f);g=Math.cos(b.b);m=Math.sin(b.b);l=Math.cos(b.c);var t=Math.sin(b.c),q=b.d,p=b.e,w=b.l;b=new Float32Array([g*q*l,g*t*q,-m*q,0,-f*t*p+n*m*p*l,f*p*l+n*m*t*p,n*g*p,0,f*m*w*l+n*t*w,f*m*t*w-n*w*l,f*g*w,0,b.x,b.y,b.z,1]);A(v.u,a.B,3);A(v.s,a.A,3);A(v.o,a.i,4);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a.m);c.useProgram(h);c.uniformMatrix4fv(v.C,!1,d);c.uniformMatrix4fv(v.F,!1,e);c.uniformMatrix4fv(v.w,!1,b);c.uniform3f(v.j,r.x,r.y,r.z);c.uniform3f(v.v,50,50,50);c.drawElements(c.TRIANGLES,a.D/2,c.UNSIGNED_INT,0)});requestAnimationFrame(pa)}function A(a,d,e){c.bindBuffer(c.ARRAY_BUFFER,d);c.vertexAttribPointer(a,e,c.FLOAT,!1,0,0);c.enableVertexAttribArray(a)}function B(a,d){d="object"==typeof d?d:k[d];var e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER,new Float32Array(d.g),c.STATIC_DRAW);var f=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint32Array(d.h),c.STATIC_DRAW);var g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g);c.bufferData(c.ARRAY_BUFFER,new Float32Array(d.n),c.STATIC_DRAW);var b=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,b);c.bufferData(c.ARRAY_BUFFER,new Float32Array(d.c),c.STATIC_DRAW);aa.push(a={a,B:e,m:f,A:g,i:b,D:d.g.length});return a}var C=Math.PI,qa=C/2;function ra(a,d){a=c.createShader(a);c.shaderSource(a,d);c.compileShader(a);return a}function z(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]}function D(a,d,e,f=0,g=0,b=0,n=1,l=1,m=1){return{x:a,y:d,z:e,f,b:g,c:b,d:n,e:l,l:m}};(function(){c=document.getElementById("c").getContext("webgl2");var a=ra(c.VERTEX_SHADER,"attribute vec3 in_position,in_normal;attribute vec4 in_color;uniform mat4 model_matrix,view_matrix,projection_matrix;varying highp vec3 world_pos,world_normal,world_color;varying highp vec4 viewSpace;void main(){world_pos=(model_matrix*vec4(in_position,1)).xyz,world_normal=normalize(mat3(model_matrix)*in_normal),world_color=vec3(in_color),viewSpace=view_matrix*model_matrix*vec4(in_position,1),gl_Position=projection_matrix*viewSpace;}"),d=ra(c.FRAGMENT_SHADER,"uniform highp vec3 light_position,eye_position;const highp vec3 v=vec3(.15,.05,0.),w=vec3(.2,.2,.2);varying highp vec3 world_pos,world_normal,world_color;varying highp vec4 viewSpace;const lowp vec3 l=vec3(.5,.5,.5);const lowp float h=.4;void main(){highp vec3 f=normalize(light_position-world_pos),e=normalize(eye_position-world_pos),s=v*max(float(0),dot(f,world_normal));highp float c=float(1)-max(dot(e,world_normal),0.);c=smoothstep(.6,1.,c);highp vec3 r=w*vec3(c,c,c),n=(r+s)*world_color,d=vec3(0,0,0);highp float g=float(0),o=float(0);g=length(viewSpace);o=1./exp(g*h);o=clamp(o,0.,1.);d=mix(l,n,o);gl_FragColor=vec4(d,1);}");h=c.createProgram();c.attachShader(h,a);c.attachShader(h,d);c.linkProgram(h);Object.keys(v).forEach(function(a){v[a]=a.startsWith("in_")?c.getAttribLocation(h,a):c.getUniformLocation(h,a)});ka();requestAnimationFrame(pa);r.b=Math.PI})();var E;function F(){var a=E;0==a&&(a=.1);return Math.sin(1/(a/1E7))/2}function sa(a,d){a.x+=.02*Math.cos(d);a.z+=.02*Math.sin(d)}var G;function ta(){function a(a){return((g[n[b[a]]]||0)+(g[n[b[a+4]]]||0))/2}for(var d=H*I,e=J*I,f=I,g=K,b=[0,2,0,1,1,3,2,3],n=[d+e*G,d+f+e*G,d+(e+f)*G,d+f+(e+f)*G],l=[a(1),a(0),a(2),a(3)],m=d+f/2,t=e+f/2,q=0;4>q;q++)g[[m,m,d,d+f][q]+[e+f,e,t,t][q]*G]=l[q]+.1*(E=F())*Math.log2(f);g[m+t*G]=(l[0]+l[1]+l[2]+l[3])/4}function ua(){var a=M,d=N,e=!1;va.forEach((f)=>{1>Math.abs(f[0]-a)&&1>Math.abs(f[1]-d)&&(e|=1)});return e}var O={},P={},Q={},R=0,S={},T;E=.39954239006;G=65;var K=Array(4096);K[0]=(E=F())+.5;K[64]=(E=F())+.5;K[64*G]=(E=F())+.5;K[G*G-1]=(E=F())+.5;for(var U=0;6>U;U++)for(var V=2**U,I=64/V,H=0;H<V;H++)for(var J=0;J<V;J++)ta();for(var W=Array(304200),wa=Array(304200),xa=Array(405600),X=0;4225>X;X++){var ya=Math.floor(X/65)/10,za=X%65/10,Aa=ha(ya,0,za,ya+.1,Math.max(.01,K[X]),za+.1),Y;for(Y=0;72>Y;Y++)W[Y+72*X]=Aa[Y];for(Y=0;72>Y;Y++)wa[Y+72*X]=ja[Y];for(Y=0;96>Y;Y++)xa[Y+96*X]=[.1,.8,.1,1][Y%4]}var Ba=ia(W.length/6);B(D(0,0,0),{g:W,h:Ba,n:wa,c:xa});var Ca=S=K;E=.45;var va=[];k.push(u("7e725200401155571004664100666612284481119559122b44b133a33d13303340"));for(var Z=0;4225>Z;Z++)if(.49999<(E=F())){var Da=Ca[Z],M=Math.floor(Z/65)/10,N=Z%65/10;ua()||(B(D(M+.05,Math.max(.001,Da)+.7,N+.05),0),va.push([M,N]))}k.push(u("gqf486585006311174e8aj255c69j165m99p076c98k27498ab264c6aj172g8ch271c82e07cc8de074e94k27ae9ak295e95k399e99k375d99d271f82g27cf8dg276l88l094c9ac274c75c379c89c374d7ad284d94d38ad9ad375k85k379k89k3z84c285c37ac38ac2"));k.push(u("2i2286506300411810001130"));O=B(D(2.75,.251,5.85,0,C,0,.1,.1,.1),1);P=B(D(2.75,.22,5.87,0,C,0,.1,.1,.1),2);Q=B(D(2.75,.22,5.83,0,C,0,.1,.1,.1),2);ba=function(){x[65]?y(180):x[68]&&y(0);x[87]?y(-90):x[83]&&y(90);if(x[32])r.y+=.05;else if(x[16]||x[67])r.y-=.05;x[37]?(O.a.x-=.005,O.a.b+=.1*-O.a.b,R+=.1):x[39]?(O.a.x+=.005,O.a.b+=.1*(C-O.a.b),R+=.1):(R>2*C&&(R%=2*C),R+=.1*(Math.round(R/C)*C-R));P.a=Object.assign({},O.a);Q.a=Object.assign({},O.a);sa(P.a,-O.a.b+qa);sa(Q.a,-O.a.b-qa);P.a.y-=.031;Q.a.y-=.031;P.a.c=.4*Math.sin(R);Q.a.c=.4*-Math.sin(R);var a=O.a.x-.05,d=Math.ceil(10*a),e=Math.floor(10*O.a.z),f=d-10*a;O.a.y=.13+(Math.max(.001,S[e+Math.floor(10*a)*G])*f+Math.max(.001,S[e+d*G])*(1-f));T={x:O.a.x+.5,y:O.a.y+.6,z:O.a.z+1.2};r.x+=.1*(T.x-r.x);r.y+=.1*(T.y-r.y);r.z+=.1*(T.z-r.z)};r={x:3,y:1,z:7,f:-.3,b:6.3,c:0};